<div th:replace="~{/back_end/include/include_top}" xmlns="http://www.w3.org/1999/html"></div>
<title>活動促銷編輯</title>

<style>

</style>
</head>
<body>
<div th:replace="~{/back_end/include/include_body}"></div>
<div class="unique">
    <div>
        <h2 class="hc-2">編輯活動促銷&nbsp;<span th:text="${promotionVO.promotionId}"></span></h2>
    </div>

    <div>

        <form th:action="@{update}" method="post" th:object="${promotionVO}" enctype="multipart/form-data">
            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">活動促銷標題 <span class="require_text">(必填)</span></h5>
                </div>
                <input type="text" class="form_element" th:field="*{promotionTitle}"
                       onclick="hideContent('promotionTitle.errors');"/>
                <div th:if="${#fields.hasErrors('promotionTitle')}" class="error" id="promotionTitle.errors">
                    <span th:errors="*{promotionTitle}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>
            <div class="mb-3">
                <div class="mb-4">
                    <h5 class="f-w">活動促銷說明<span class="require_text">(必填)</span></h5>
                </div>
                <textarea class="textarea_element" th:field="*{promotionContent}"
                          onclick="hideContent('promotionContent.errors');"/></textarea>
                <div th:if="${#fields.hasErrors('promotionContent')}" th:errors="*{promotionContent}"
                     class="error" id="promotionContent.errors"></div>
            </div>
            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">促銷折扣</h5>
                </div>
                <select class="selectric2 " th:field="*{promotionDiscount}">
                    <option value="1">無</option>
                    <option value="0.95">95折</option>
                    <option value="0.9">9折</option>
                    <option value="0.85">85折</option>
                    <option value="0.8">8折</option>
                    <option value="0.75">75折</option>
                    <option value="0.7">7折</option>
                    <option value="0.65">65折</option>
                    <option value="0.6">6折</option>
                    <option value="0.55">55折</option>
                    <option value="0.5">5折</option>
                    <option value="0.45">45折</option>
                    <option value="0.4">4折</option>
                    <option value="0.35">35折</option>
                    <option value="0.3">3折</option>
                    <option value="0.25">25折</option>
                    <option value="0.2">2折</option>
                    <option value="0.15">15折</option>
                    <option value="0.1">1折</option>
                </select>
                <span>&nbsp;※ 促銷折扣與促銷折價只能擇一使用！</span>
                <div th:if="${#fields.hasErrors('promotionDiscount')}" class="error" id="promotionDiscount.errors">
                    <span th:errors="*{promotionDiscount}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>
            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">促銷折價 </span></h5>
                </div>
                <span class="nt-u2 f-z">NT$&nbsp;</span>
                <input type="text" class="form_element5 nt-u2" th:field="*{promotionCoupon}"
                       onclick="hideContent('promotionCoupon.errors');"/>
                <span>※ 促銷折扣與促銷折價只能擇一使用！</span>
                <div th:if="${#fields.hasErrors('promotionCoupon')}" class="error" id="promotionCoupon.errors">
                    <span th:errors="*{promotionCoupon}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>
            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">促銷開始日期 <span class="require_text">(必填)</span></h5>
                </div>
                <input type="date" class="form_element6" th:field="*{promotionStarted}"
                       onclick="hideContent('promotionStarted.errors');"/>
                <div th:if="${#fields.hasErrors('promotionStarted')}" class="error" id="promotionStarted.errors">
                    <span th:errors="*{promotionStarted}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>
            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">促銷結束日期 <span class="require_text">(必填)</span></h5>
                </div>
                <input type="date" class="form_element6" th:field="*{promotionEnd}"
                       onclick="hideContent('promotionEnd.errors');"/>
                <div th:if="${#fields.hasErrors('promotionEnd')}" class="error" id="promotionEnd.errors">
                    <span th:errors="*{promotionEnd}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>

            <div class="mb-4">
                <div class="mb-4">
                    <h5 class="f-w">活動促銷狀態 <span class="require_text">(必填)</span></h5>
                </div>
                <select class="selectric2 " th:field="*{promotionState}">
                    <option value="">請選擇</option>
                    <option value="true">上架</option>
                    <option value="false">下架</option>
                </select>
                <div th:if="${#fields.hasErrors('promotionState')}" class="error" id="promotionState.errors">
                    <span th:errors="*{promotionState}"></span>
                    <i class="fa-solid fa-circle-exclamation" style="color: #dc3545;"></i>
                </div>
            </div>
            <br>

            <div>
                <div class="btn_area">

                    <button type="button" class="btn btn-secondary cu-2"
                            onclick="window.location.href='/promotion/listAllPromotion'">返回
                    </button>
                    <button type="submit" id="submit" class=" btn btn-outline-success2 cu-2"> 編輯完成</button>
                </div>

            </div>
        </form>
    </div>
</div>

<!-- JavaScript part -->
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        var promotionDiscountSelect = document.querySelector('select[name="promotionDiscount"]');
        var promotionCouponInput = document.querySelector('input[name="promotionCoupon"]');

        promotionDiscountSelect.addEventListener('change', function () {
            if (promotionDiscountSelect.value != "1") {
                promotionCouponInput.value = "0";
            }
        });

        promotionCouponInput.addEventListener('input', function () {
            if (promotionCouponInput.value > 0) {
                promotionDiscountSelect.value = "1";
            }
        });
    });

    //清除提示信息
    function hideContent(d) {
        document.getElementById(d).style.display = "none";
    }
</script>

<div th:replace="~{/back_end/include/include_bottom}"></div>