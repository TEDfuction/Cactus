<div th:replace="~{/back_end/include/include_top}" xmlns="http://www.w3.org/1999/html"></div>
<title>活動項目明細 </title>
<!-- 引入 jQuery 和 jQuery UI 的 CSS 和 JavaScript 文件 -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<style>
    .pad {
        padding: 0rem 3rem;
    }

    .location {
        display: inline-flex;
        padding: 5px 10px;
        align-content: center;
        background-color: rgba(15, 21, 112, 0.89);
        color: #ece9e9;
        margin: 0.5rem 0rem;
    }

    .pad2 {
        margin: 3rem 0rem 1rem 0rem;
    }

    .pad3 {
        margin: 3.5rem 0rem 1rem 0rem;
    }
    .pad4 {
        padding: 4rem 4rem 0rem 4rem;
        display: none;
    }

    div.topic {
        font-size: 32px;
        color: #1e1e1e;


    }

    .checkTo {
        padding-bottom: 2rem;
    }

    .note {
        padding-right: 2.5rem;
    }
    body {
        background-image: none !important;
    }
    .shadow-top{
        box-shadow: 0 -0.125rem 0.75rem rgba(0, 0, 0, 0.075) !important;
    }
    .sticky-bottom {
        position: sticky;
        bottom: 0;
        z-index: 1020;
    }
    .px-box{

        padding-right: 5rem !important;
        padding-left: 4rem !important;
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    .fc{
        color: #060e6d;
    }
    .rd{
        border-radius: 4px;
    }
    .menu-to{
        padding-left: 10px;
        color: #060e6d;
        border-left: 4px solid #060e6d;
    }
    .menu-to2{
        padding-left: 10px;
        margin-bottom: 1.5rem;
        color: #060e6d;
        border-left: 4px solid #060e6d;
    }
    .sch{
        display: inline-flex;
        font-size: 22px;
        font-weight: bold;
        padding-right: 10px;
        color: #2d2d2d;
        margin: 2rem 0rem;
    }
    .two-col{
        display: inline-flex;
        flex-direction: column;
        padding-left: 10rem;
        font-size: 18px;
    }
    .one-col{
        padding-top: 3rem;
    }
    .block-s{
        padding-left: 3.5rem;
    }
    .dollar{
        font-weight: bold;
        color: #060e6d;
        font-size: 22px;
    }
    .a-d{
        text-decoration: underline;
    }
    .checkblock{
        background-color: rgb(250, 240, 225);
        padding: 1.5rem 1rem;
        border-radius: 4px;
        display: flex;
        margin: 3rem 0rem ;
    }
    .datechoose{
        margin: 1rem 0rem 3rem 0rem;
        width:40%;
        height: 2.5rem;
        border-radius: 4px;
        border: 1px solid #dad9d9;
        font-size: 18px;

    }
    .check-input{
        margin-right: 2rem;
        font-size: 18px;
        color: #2a2a2a;
    }
    .radio-1{
        width: 16px;
        height: 16px;
        margin-right: 0.5rem;
    }
    .order-1{
        float: right;
        margin-right: 0.5rem;
    }

    .ui-datepicker-header{
        background-color: #d0faf6;
    }
    .ui-state-default{
        border-radius: 3px;
        border: 1px solid #9ad2ce !important;
        background-color: #77dfe8 !important;
    }


</style>
</head>
<body>
<div class="pad">
    <div class="pad2">
        <div class="location"><img th:src="@{/img/front_end/activity/location.png}"  style="height: 25px;">&nbsp;澎湖縣</div>
        <div class="topic" th:text="${itemVO.activityName}"></div>
        
    </div>
    <hr>
    <div class="checkTo">
        <span class="note"><i class="fa-solid fa-list" style="color: #777777;"></i>&nbsp;訂單即時確認</span>
        <span class="note"><i class="fa-solid fa-car" style="color: #777777;"></i>&nbsp;自行前往集合點</span>
        <span class="note"><i class="fa-regular fa-clock" style="color: #777777;"></i>&nbsp;總行程時間 <span th:text="${itemVO.sessionVOs[0].duration}"></span>小時</span>
    </div>

    <div id="carouselExampleFade" class="carousel slide carousel-fade " data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px" style="height: 550px;">
            </div>
            <div class="carousel-item">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px" style="height: 550px;">
            </div>
            <div class="carousel-item">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px" style="height: 550px;">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="pad3">
        <span th:utext="${itemVO.activityInfo}"></span>


    </div>


</div>
<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg bg-white navbar-light sticky-bottom shadow-top px-box wow fadeIn" data-wow-delay="0.1s">
    <h3 class="fc" th:text="${itemVO.activityName}"></h3>

    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0 pdlef">

        </div>

        <a href="javascript:void(0);" class="btn btn-primary py-2 px-4 d-none d-lg-block rd" id="reserveButton">立即預訂</a>

    </div>

</nav>

<!-- Navbar End -->
<div class="pad4 shadow-top">
    <div>
        <h4>選擇預訂場次</h4>
    </div>
    <hr>
    <input type="hidden" id="activityId" th:value="${itemVO.activityId}">

    <h4 class="menu-to">活動</h4>
    <div class="sch" th:text="${itemVO.activityName}">

    </div>
    <div class="two-col">
    <span class="block-s" >NT$ &nbsp;<span class="dollar" th:text="${itemVO.activityPrice}"></span><span>&nbsp; 起</span></span>
        <span>* 金額以付款頁面為準</span>
    </div>
    <div class="one-col">
    <h4 class="menu-to">日期</h4>
    </div>
<form th:action="@{/activity/listDetailAddAttendees} " method="GET" id="itemId" >
          <input type="hidden" name="activityPhotoId" th:value="${photoVO.activityPhotoId}">
                 <input type="hidden" name="activityId" id="activityId" class="activityId" th:value="${photoVO.activityPh.activityId}">
    <div>
        <form id="searchForm">
            <label for="activityDate"></label>
            <input type="text" class="datechoose" id="activityDate"  th:value="${sessionVO.activityDate}" />
            &nbsp;&nbsp;<i class="fa-solid fa-pen fa-lg" style="color: #060e6d;"></i>
        </form>
        <div id="timePeriodResults"></div>
    </div>

    <div class="checkblock">
        <input type="checkbox"  name="check-rule" id="check-rule" value="check-rule" />
        &nbsp;我已詳細閱讀並同意凱克特司渡假村的<a style="cursor: pointer;" target="_blank"  class="a-d" onclick="showAlert1()" >使用條款</a>與<a style="cursor: pointer;" target="_blank"  class="a-d" onclick="showAlert2()">隱私權保護政策</a>
    </div>
    <div class="order-1">
        
<!--         <button  class="btn btn-primary py-2 px-4 d-none d-lg-block rd" onclick="document.getElementById('link').click()"> -->
<!--         <a id="link" href=''></a> -->
         
             <!-- 把值帶到下個頁面listDetailAddAttendees -->

<!--                  <input type="text" name="timePeriod" th:value="${photoVO.activityPh.sessionVOs[0].time_PeriodVO[0].sessionTimePeriodId}"> -->

                 <button type="button" class="btn btn-primary border-radius"  id="loginDefault">立即預訂</button>
<!--         </button> -->
    </div>
</form>

</div>

<!--<p><a th:href="@{/activity/select_item}">回查詢頁<label th:text="${success}"></label></a></p></div>-->
<!-- Footer Start -->
<div>

    <script
            src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
            type="module"
    ></script>
    <dotlottie-player
            src="https://lottie.host/d5c4ce3c-dc9c-4472-a042-082ebdf05872/kzl7Q2a4za.json"
            background="transparent"
            speed="0.4"
            style="max-width: 100%; margin-bottom: -1px"
            direction="1"
            playMode="normal"
            loop
            autoplay
    ></dotlottie-player>


</div>

<div class="container-fluid text-body footer pt-5 px-0 wow fadeIn" data-wow-delay="0.1s">


    <div class="container py-5">
        <div class="row g-5">

            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">最新消息</h3>
                <a class="btn btn-link text-primary5" href="">所有公告</a>
                <a class="btn btn-link text-primary5" href="">住宿優惠</a>
                <a class="btn btn-link text-primary5" href="">商城優惠</a>
                <a class="btn btn-link text-primary5" href="">活動優惠</a>
                <!-- <a class="btn btn-link" href="">Construction</a> -->
            </div>
            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">房型介紹</h3>
                <a class="btn btn-link text-primary5" href="">AAA套房</a>
                <a class="btn btn-link text-primary5" href="">BBB套房</a>
                <a class="btn btn-link text-primary5" href="">CCC套房</a>
                <a class="btn btn-link text-primary5" href="">DDD套房</a>
                <!-- <a class="btn btn-link" href="">Support</a> -->
            </div>
            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">特色活動</h3>
                <a class="btn btn-link text-primary5" href="">浮潛</a>
                <a class="btn btn-link text-primary5" href="">SUP立槳衝浪</a>
                <a class="btn btn-link text-primary5" href="">寬板滑水</a>
                <a class="btn btn-link text-primary5" href="">淺灘衝浪</a>
                <a class="btn btn-link text-primary5" href="">仙人掌園區參觀</a>
            </div>


            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">聯絡我們</h3>
                <p class="mb-2"><i class="fa fa-map-marker-alt text-primary5 me-2"></i>地址：澎湖縣馬公市時裡200號</p>
                <p class="mb-2"><i class="fa fa-phone-alt text-primary5 me-2"></i>訂房專線：06-2345678 #888</p>
                <p class="mb-2"><i class="fa fa-envelope text-primary5 me-2"></i>cactus@gmail.com</p>

            </div>

        </div>
    </div>
    <div class="container-fluid copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    &copy; <a href="#">2024 Cactus Resort Hotel 凱克特司渡假村</a>, All Right Reserved.
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                    <!-- Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                    <br> Distributed By: <a class="border-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Footer End -->


<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
 <script>
    
    $(document).ready(function () {
     
    	var photo_id = $(".actPhotoId").val();
    	console.log(photo_id);
    	
     var session_acount="";
     console.log("session_acount =" + session_acount);
        
        //查看session是否有存著account值
        $.ajax({
            url: '/member/getSessionAccount', 
            type: 'GET',
            success: function(response) {
                
                session_acount = response;
                console.log("response Session Account:", session_acount);
            },
            error: function(xhr, status, error) {
                console.error("Error:", error);
            }
        });
    
        
        
    jQuery("#loginDefault").click(function addToCart(e) {
     
     if ( session_acount!="" ) {
    	 
    	 event.preventDefault()
         
    	 
    	  // 假設 timeperiod 是一个包含 radio 按鈕的 DOM 元素集合
    	  var activityDate = document.getElementById("activityDate").value;
    	  var checkbox = document.getElementById('check-rule');
    	       if (activityDate.trim() === "") {
    	        // 如果日期阻止表單提交
    	        event.preventDefault();
    	        swal("請注意","請點選活動日期！","warning");
    	        } else {
    	            var timeperiod = document.querySelectorAll("input[type='radio']");
    	            var noneChecked = true; // 初始化為 true
    	        // 假設 timeperiod 是一個包含 radio 按鈕的 DOM 元素集合
    	        for (var i = 0; i < timeperiod.length; i++) {
    	            if (timeperiod[i].checked) {
    	                noneChecked = false; // 如果有任何一個 radio 被選中，標記為 false
    	                break; // 如果有一個被選中，就不再執行
    	            }
    	        }

    	        if (noneChecked) {
    	            event.preventDefault();
    	            swal("請注意","請點選活動時段!","warning");
    	        } else if(!checkbox.checked){
    	        	event.preventDefault();
    	        	swal("請注意","請勾選同意使用條款與隱私權保護政策","warning");
    	        } else{
    	        	// 如果日期和時段都填寫了，則提交表單
    	            $("#itemId").submit();
    	        }
    	           
    	 }
    	     
    	      
     
        } else {// 如果沒有值
         
        	e.preventDefault();
         var location = "/activity/activityPhoto";
         var dataToSend = { location: location };

            //將欲前往頁面存入供跳轉
             $.ajax({
                    url: '/member/setLocation', // 替换成你的后端路由
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(dataToSend),
                    success: function(response) {
                        //確認是否儲存成功
                        console.log("Location setting success", response);
                    },
                    error: function(xhr, status, error) {
                        console.error("Error:", error);
                    }
                });
        
    swal("請注意","您必須登入會員才能使用該功能，若您尚無會員請先進行註冊!","warning")
                
    .then(function(){ 
                    window.location.href = '/member/memberLogin';
                })
        }
     
    });
   });
 </script>




<script>
    $(document).ready(function() {
        $('#reserveButton').click(function() {
            $('nav').hide();
            $('.pad4').show();
            $('html, body').animate({
                scrollTop: $('.pad4').offset().top
            }, 80);
        });
    });
    function checkAndRedirect() {
        var checkBox = document.getElementById('check-rule');
        if (!checkBox.checked) {
            alert('請先勾選同意使用條款和隱私權保護政策');
        } else {
            // 获取链接
            var link = document.getElementById('link').getAttribute('href');
            if (link) {
                window.location.href = link;
            }
        }
    }
</script>

<script>
    $(document).ready(function() {
        var availableDates = [];
        var activityId = $("#activityId").val(); // 從頁面獲取 activityId
        console.log(activityId);
        $.ajax({
            url: "/activity/activityDatesByActivityId",
            method: "GET",
            data: { "activityId": activityId },
            dataType: 'json',
            success: function(activityDates) {
                console.log(activityDates);
                availableDates = activityDates; // 將活動儲存在 availableDates 變量中

                // 設置日期儲存器
                $("#activityDate").datepicker({
                    dateFormat: 'yy-mm-dd',
                    beforeShowDay: function(date) {
                        var dateString = $.datepicker.formatDate('yy-mm-dd', date);
                        return [availableDates.includes(dateString)];
                    },
                    onSelect: function(dateText) {
                        console.log("Selected activityDate: ", dateText);
                        $.ajax({
                            url: "/activity/timePeriodsByActivityDate",
                            method: "GET",
                            data: { "activityDate": dateText },
                            dataType: 'json',
                            success: function(timePeriods) {
                                var resultsDiv = $("#timePeriodResults");
                                resultsDiv.empty();
                                if (timePeriods.length > 0) {
                                    var timeList = $("<div ><h4 class='menu-to2'>時段</h4></div>");
                                    timePeriods.forEach(function(timePeriodObj) {
                                        var formattedTime = new Date('1970-01-01T' + timePeriodObj.timePeriod).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                                        var radioButton = $('<input type="radio" class="radio-1" name="sessionTimePeriodId" id="' + timePeriodObj.sessionTimePeriodId + '" value="' + timePeriodObj.sessionTimePeriodId + '">');
                                        var label = $('<label></label>').attr("for", timePeriodObj.sessionTimePeriodId).text(formattedTime);
                                        var listItem = $("<span class='check-input'></span>").append(radioButton).append(label);
                                        timeList.append(listItem);
                                    });
                                    resultsDiv.append(timeList);
                                } else {
                                    resultsDiv.append($("<p></p>").text("今天没有活動哦> <"));
                                }
                            },
                            error: function() {
                                $("#timePeriodResults").html("<p>今天活動已額滿！</p>");
                            }
                        });
                    }
                });
            },
            error: function() {
                console.error("Error retrieving activity dates.");
            }
        });
    });

</script>
<script>
function showAlert1() {
    swal("歡迎來到凱克特司渡假村！\n\n請仔細閱讀以下使用條款，使用我們的網站即表示您同意這些條款。如果您有任何問題，請隨時與我們聯繫。\n\n1. 使用限制\n1.1 您同意不會使用我們的服務進行非法活動或違反任何適用法律法規的行為。\n\n2. 預訂與付款\n2.1 預訂凱克特司渡假村的客房或服務時，您必須提供準確的資訊。\n2.2 付款條件將根據您的預訂情況而定。請仔細閱讀付款政策。\n\n3. 取消與退款\n3.1 取消預訂可能會產生費用，詳細資訊請參考我們的取消政策。\n3.2 在特定情況下，我們可能提供部分或全額退款，請查看我們的退款政策以獲取更多資訊。\n\n4. 免責聲明\n4.1 凱克特司渡假村將盡力確保本網站上的資訊準確性，但不對訊息的準確性、完整性、及時性或適用性作任何保證。\n4.2 在法律允許的範圍內，我們不對因使用或無法使用本網站而導致的任何直接或間接損失負責。\n\n5. 修訂與修改\n5.1 我們保留隨時修改本使用條款的權利。請定期查看以了解任何更改。您繼續使用本網站即表示您接受這些更改。\n\n以上是凱克特司渡假村的使用條款。如有任何疑問，請聯繫我們。");
}
function showAlert2() {
	swal("隱私權保護政策\n\n1. 收集的資訊\n1.1 當您訪問我們的網站時，我們可能會收集您提供的個人資訊，包括但不限於姓名、電子郵件地址、聯絡方式等。\n\n2. 資訊的使用\n2.1 我們可能會使用您提供的資訊來處理訂單、提供客戶支援、向您發送重要通知等。\n\n3. 資訊的分享\n3.1 我們不會向任何第三方出售或租賃您的個人資訊。\n3.2 在某些情況下，我們可能會與合作夥伴共享您的資訊，以提供服務或完成交易。我們會要求這些合作夥伴保護您的個人資訊。\n\n4. 資訊的安全\n4.1 我們將採取合理的安全措施來保護您的個人資訊免受未經授權的訪問、使用或披露。\n4.2 雖然我們努力保護您的個人資訊，但請注意，網路上的訊息傳輸並非100％安全，我們無法保證您的資訊在傳輸過程中完全安全。\n\n請您仔細閱讀並理解我們的隱私權保護政策。如果您對此有任何疑問，請隨時與我們聯繫。");
}
</script>
 
<div th:replace="~{/back_end/include/include_bottom}"></div>