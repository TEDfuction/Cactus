<div th:replace="~{/back_end/include/include_top}" xmlns="http://www.w3.org/1999/html"></div>
<title>活動項目明細 </title>
<!-- 引入 jQuery 和 jQuery UI 的 CSS 和 JavaScript 文件 -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<style>
    .pad {
        padding: 0rem 3rem;
    }

    .location {
        display: inline-flex;
        padding: 5px 10px;
        align-content: center;
        background-color: rgba(15, 21, 112, 0.89);
        color: #ece9e9;
        margin: 0.5rem 0rem;
    }

    .pad2 {
        margin: 3rem 0rem 1rem 0rem;
    }

    .pad3 {
        margin: 3.5rem 0rem 1rem 0rem;
    }
    .pad4 {
        padding: 4rem 4rem 0rem 4rem;
        display: none;
    }

    div.topic {
        font-size: 32px;
        color: #1e1e1e;


    }

    .checkTo {
        padding-bottom: 2rem;
    }

    .note {
        padding-right: 2.5rem;
    }
    body {
        background-image: none !important;
    }
    .shadow-top{
        box-shadow: 0 -0.125rem 0.75rem rgba(0, 0, 0, 0.075) !important;
    }
    .sticky-bottom {
        position: sticky;
        bottom: 0;
        z-index: 1020;
    }
    .px-box{

        padding-right: 5rem !important;
        padding-left: 4rem !important;
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    .fc{
        color: #060e6d;
    }
    .rd{
        border-radius: 4px;
    }
    .menu-to{
        padding-left: 10px;
        color: #060e6d;
        border-left: 4px solid #060e6d;
    }
    .menu-to2{
        padding-left: 10px;
        margin-bottom: 1.5rem;
        color: #060e6d;
        border-left: 4px solid #060e6d;
    }
    .sch{
        display: inline-flex;
        font-size: 22px;
        font-weight: bold;
        padding-right: 10px;
        color: #2d2d2d;
        margin: 2rem 0rem;
    }
    .two-col{
        display: inline-flex;
        flex-direction: column;
        padding-left: 10rem;
        font-size: 18px;
    }
    .one-col{
        padding-top: 3rem;
    }
    .block-s{
        padding-left: 3.5rem;
    }
    .dollar{
        font-weight: bold;
        color: #060e6d;
        font-size: 22px;
    }
    .a-d{
        text-decoration: underline;
    }
    .checkblock{
        background-color: rgb(250, 240, 225);
        padding: 1.5rem 1rem;
        border-radius: 4px;
        display: flex;
        margin: 3rem 0rem ;
    }
    .datechoose{
        margin: 1rem 0rem 3rem 0rem;
        width:40%;
        height: 2.5rem;
        border-radius: 4px;
        border: 1px solid #dad9d9;
        font-size: 18px;

    }
    .check-input{
        margin-right: 2rem;
        font-size: 18px;
        color: #2a2a2a;
    }
    .radio-1{
        width: 16px;
        height: 16px;
        margin-right: 0.5rem;
    }
    .order-1{
        float: right;
        margin-right: 0.5rem;
    }


</style>
</head>
<body>
<div class="pad">
    <div class="pad2">
        <div class="location"><img th:src="@{/img/activities/icons/map-pin.svg}">&nbsp;澎湖縣</div>
        <div class="topic" th:text="${itemVO.activityName}"></div>
    </div>
    <hr>
    <div class="checkTo">
        <span class="note"><i class="fa-solid fa-list" style="color: #777777;"></i>&nbsp;訂單即時確認</span>
        <span class="note"><i class="fa-solid fa-car" style="color: #777777;"></i>&nbsp;自行前往集合點</span>
        <span class="note"><i class="fa-regular fa-clock" style="color: #777777;"></i>&nbsp;總行程時間 <span th:text="${itemVO.sessionVOs[0].duration}"></span>小時</span>
    </div>

    <div id="carouselExampleFade" class="carousel slide carousel-fade " data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px">
            </div>
            <div class="carousel-item">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px">
            </div>
            <div class="carousel-item">
                <img class="card-img-top card-h" th:src="@{/activity/DBGifReader} + '?activityPhotoId=' + ${photoVO.activityPhotoId}" width="100px">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="pad3">
        <span th:utext="${itemVO.activityInfo}"></span>


    </div>


</div>
<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg bg-white navbar-light sticky-bottom shadow-top px-box wow fadeIn" data-wow-delay="0.1s">
    <h3 class="fc" th:text="${itemVO.activityName}"></h3>

    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0 pdlef">

        </div>

        <a href="javascript:void(0);" class="btn btn-primary py-2 px-4 d-none d-lg-block rd" id="reserveButton">立即預訂</a>

    </div>

</nav>

<!-- Navbar End -->
<div class="pad4 shadow-top">
    <div>
        <h4>選擇預訂場次</h4>
    </div>
    <hr>

    <h4 class="menu-to">活動</h4>
    <div class="sch" th:text="${itemVO.activityName}">

    </div>
    <div class="two-col">
    <span class="block-s" >NT$ &nbsp;<span class="dollar" th:text="${itemVO.activityPrice}"></span><span>&nbsp; 起</span></span>
        <span>* 金額以付款頁面為準</span>
    </div>
    <div class="one-col">
    <h4 class="menu-to">日期</h4>
    </div>
    <div>
        <form id="searchForm">
            <label for="activityDate"></label>
            <input type="date" class="datechoose" id="activityDate" name="activityDate" th:value="${sessionVO.activityDate}"/>
            &nbsp;&nbsp;<i class="fa-solid fa-pen fa-lg" style="color: #060e6d;"></i>
        </form>
        <div id="timePeriodResults"></div>
    </div>

    <div class="checkblock">
        <input type="checkbox"  name="check-rule" id="check-rule" value="check-rule" />
        &nbsp;我已詳細閱讀並同意凱克特司渡假村的<a  target="_blank" href="" class="a-d">使用條款</a>與<a target="_blank" href="" class="a-d">隱私權保護政策</a>
    </div>
    <div class="order-1">
        
<!--         <button  class="btn btn-primary py-2 px-4 d-none d-lg-block rd" onclick="document.getElementById('link').click()"> -->
<!--         <a id="link" href=''></a> -->
         
             <!-- 把值帶到下個頁面listDetailAddAttendees -->
             <form th:action="@{/activity/listDetailAddAttendees} " method="GET" id="itemId" >
                 <input type="hidden" name="activityPhotoId" th:value="${photoVO.activityPhotoId}"> 
                 <input type="hidden" name="activityId" th:value="${photoVO.activityPh.activityId}"> 
                 <button type="button" class="btn btn-primary border-radius"  id="loginDefault">立即預訂</button>
              </form> 
<!--         </button> -->
    </div>

</div>

<!--<p><a th:href="@{/activity/select_item}">回查詢頁<label th:text="${success}"></label></a></p></div>-->
<!-- Footer Start -->
<div>

    <script
            src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
            type="module"
    ></script>
    <dotlottie-player
            src="https://lottie.host/d5c4ce3c-dc9c-4472-a042-082ebdf05872/kzl7Q2a4za.json"
            background="transparent"
            speed="0.4"
            style="max-width: 100%; margin-bottom: -1px"
            direction="1"
            playMode="normal"
            loop
            autoplay
    ></dotlottie-player>


</div>

<div class="container-fluid text-body footer pt-5 px-0 wow fadeIn" data-wow-delay="0.1s">


    <div class="container py-5">
        <div class="row g-5">

            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">最新消息</h3>
                <a class="btn btn-link text-primary5" href="">所有公告</a>
                <a class="btn btn-link text-primary5" href="">住宿優惠</a>
                <a class="btn btn-link text-primary5" href="">商城優惠</a>
                <a class="btn btn-link text-primary5" href="">活動優惠</a>
                <!-- <a class="btn btn-link" href="">Construction</a> -->
            </div>
            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">房型介紹</h3>
                <a class="btn btn-link text-primary5" href="">AAA套房</a>
                <a class="btn btn-link text-primary5" href="">BBB套房</a>
                <a class="btn btn-link text-primary5" href="">CCC套房</a>
                <a class="btn btn-link text-primary5" href="">DDD套房</a>
                <!-- <a class="btn btn-link" href="">Support</a> -->
            </div>
            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">特色活動</h3>
                <a class="btn btn-link text-primary5" href="">浮潛</a>
                <a class="btn btn-link text-primary5" href="">SUP立槳衝浪</a>
                <a class="btn btn-link text-primary5" href="">寬板滑水</a>
                <a class="btn btn-link text-primary5" href="">淺灘衝浪</a>
                <a class="btn btn-link text-primary5" href="">仙人掌園區參觀</a>
            </div>


            <div class="col-lg-3 col-md-6">
                <h3 class="text-darkblue mb-4">聯絡我們</h3>
                <p class="mb-2"><i class="fa fa-map-marker-alt text-primary5 me-2"></i>地址：澎湖縣馬公市時裡200號</p>
                <p class="mb-2"><i class="fa fa-phone-alt text-primary5 me-2"></i>訂房專線：06-2345678 #888</p>
                <p class="mb-2"><i class="fa fa-envelope text-primary5 me-2"></i>cactus@gmail.com</p>

            </div>

        </div>
    </div>
    <div class="container-fluid copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    &copy; <a href="#">2024 Cactus Resort Hotel 凱克特司渡假村</a>, All Right Reserved.
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                    <!-- Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                    <br> Distributed By: <a class="border-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Footer End -->


<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
 <script>
    
    $(document).ready(function () {
     
    	var photo_id = $(".actPhotoId").val();
    	console.log(photo_id);
    	
     var session_acount="";
     console.log("session_acount =" + session_acount);
        
        //查看session是否有存著account值
        $.ajax({
            url: '/member/getSessionAccount', 
            type: 'GET',
            success: function(response) {
                
                session_acount = response;
                console.log("response Session Account:", session_acount);
            },
            error: function(xhr, status, error) {
                console.error("Error:", error);
            }
        });
    
        
        
    jQuery("#loginDefault").click(function addToCart(e) {
     
     if ( session_acount!="" ) {
      
        $("#itemId").submit();
     
        } else {// 如果沒有值
         
        	e.preventDefault();
         var location = "/activity/activityPhoto";
         var dataToSend = { location: location };

            //將欲前往頁面存入供跳轉
             $.ajax({
                    url: '/member/setLocation', // 替换成你的后端路由
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(dataToSend),
                    success: function(response) {
                        //確認是否儲存成功
                        console.log("Location setting success", response);
                    },
                    error: function(xhr, status, error) {
                        console.error("Error:", error);
                    }
                });
        
    swal("請注意","您必須登入會員才能使用該功能，若您尚無會員請先進行註冊!","warning")
                
    .then(function(){ 
                    window.location.href = '/member/memberLogin';
                })
        }
     
    });
   });
 </script>




<script>
    $(document).ready(function() {
        $('#reserveButton').click(function() {
            $('nav').hide();
            $('.pad4').show();
            $('html, body').animate({
                scrollTop: $('.pad4').offset().top
            }, 80);
        });
    });
    function checkAndRedirect() {
        var checkBox = document.getElementById('check-rule');
        if (!checkBox.checked) {
            alert('請先勾選同意使用條款和隱私權保護政策');
        } else {
            // 获取链接
            var link = document.getElementById('link').getAttribute('href');
            if (link) {
                window.location.href = link;
            }
        }
    }
</script>

<script>
    $(document).ready(function() {
        var availableDates = [];

        // 獲取可用日期並設置 Datepicker
        $.ajax({
            url: "/activity/availableDates",
            method: "GET",
            success: function(dates) { //dates:從服務器返回的可用日期數據
                availableDates = dates;

                $("#activityDate").datepicker({
                    dateFormat: 'yy-mm-dd',
                    beforeShowDay: function(date) {
                        var dateString = $.datepicker.formatDate('yy-mm-dd', date);
                        return [availableDates.includes(dateString)];
                    },
                    onSelect: function(dateText) {
                        console.log("Selected activityDate: ", dateText);
                        $.ajax({
                            url: "/activity/timePeriodsByActivityDate",
                            method: "GET",
                            data: { "activityDate": dateText },
                            dataType: 'json',
                            success: function(timePeriods) {
                                console.log(timePeriods);
                                var resultsDiv = $("#timePeriodResults");
                                resultsDiv.empty();
                                if (timePeriods.length > 0) {
                                    var timeList = $("<div ><h4 class='menu-to2'>時段</h4></div>");
                                    timePeriods.forEach(function(timePeriodObj) {
                                        var formattedTime = new Date('1970-01-01T' + timePeriodObj.timePeriod).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                                        // 創建radio
                                        var radioButton = $('<input type="radio" class="radio-1" name="timePeriod" id="' + timePeriodObj.sessionTimePeriodId + '" value="' + timePeriodObj.sessionTimePeriodId + '">');
                                        // 創建label標籤用於顯示時段
                                        var label = $('<label></label>').attr("for", timePeriodObj.sessionTimePeriodId).text(formattedTime);
                                        // 将radio和label標籤添加到列表中
                                        var listItem = $("<span class='check-input'></span>").append(radioButton).append(label);
                                        // 將列表添加到timeList變數中
                                        timeList.append(listItem);
                                    });
                                    resultsDiv.append(timeList);
                                } else {
                                    resultsDiv.append($("<p></p>").text("今天沒有活動喔> <"));
                                }
                            },
                            error: function() {
                                $("#timePeriodResults").html("<p>Error retrieving time periods.</p>");
                            }
                        });
                    }
                });
            },
            error: function() {
                console.error("Error retrieving available dates.");
            }
        });
    });
</script>

 

 
<div th:replace="~{/back_end/include/include_bottom}"></div>